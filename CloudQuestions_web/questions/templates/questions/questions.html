{% extends "base.html" %}

{% block content %}
{% if user.is_authenticated %}
<div class="base">
    <p id="user_hi">Hi, <a id="user_name" href="/accounts/settings/">{{ user.username }}</a>! </p>
</div>
{% endif %}
<div class="container_forms" id="search_form">
    <form action="/questions/" method="post">
        {% csrf_token %}
        <input type="hidden" name="action" value="search">
        {{ search_form }}
    </form>
</div>

{% if user.is_authenticated %}
<div class="container">
<div id="file_upload_form">
    <form action="/questions/" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="action" value="upload">
        {{ upload_file_form }}
        <label for="file_upload">Choose a file...</label>
        <input class="btn btn-outline-danger" id="file_button" name="file_button" type="submit" value="Submit">
    </form>
</div>
<div id="create_topic_form">
    <form method="get">
        <input class="btn btn-outline-primary" name="upload_topic" type="submit" value="Create topic"/>
    </form>
</div>
{% endif %}
</div>
{% if searched %}
<div class="list_searched">
<ul>
    {% for db_name, topic in topics_return.items %}
    <li><a href="{% url 'questions:detail' db_name %}"> {{topic}} </a></li>
    {% endfor %}
</ul>
</div>
{% if empty %}
<p> No hay ningún topic con esa búsqueda. </p>
{% endif %}
{% else %}
<div class="list_topic">
<ul>
    {% for topic, printable_topic in all_topics.items %}
    <li class="color_{{topic.color}}">
        <a href="{% url 'questions:detail' topic.name %}"> {{printable_topic}} </a>
        <p>Created: {{topic.created}}</p>
        <p>Creator: {{topic.creator}}</p>
    </li>
    {% endfor %}
</ul>
</div>
{% endif %}
{% endblock %}
