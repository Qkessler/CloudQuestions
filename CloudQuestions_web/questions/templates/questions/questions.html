{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% crispy upload_file_form upload_file_form.helper %}

{% block content %}
<div id="questions-container">
    {% if user.is_authenticated %}
    <div class="base inline-block-black">
        <p id="user_hi" class="architects">Hi, <a id="user_name" href="/accounts/settings/">{{ user.username }}</a>! </p>
    </div>
    <div class="toggle-help inline-block-black hide-help">
        <form method="get">
            <input class="btn btn-outline-success" id="help-button" name="toggle_help" type="submit" value="Help?"/>
        </form>
    </div>
    {% endif %}
    <div class="container_forms" id="search_form">
        <form action="/questions/" method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="search">
            {{ search_form }}
        </form>
    </div>

    {% if user.is_authenticated %}
    <div class="container">
        <div id="file_upload_form">
            <form action="" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="hidden" name="action" value="upload">
                {{ upload_file_form}}
                <input class="btn btn-outline-danger" id="file_button" name="file_button" type="submit" value="Submit">
            </form>
        </div>
        <div id="create_topic_form">
            <form method="get">
                <input class="btn btn-outline-primary" name="upload_topic" type="submit" value="Create topic"/>
            </form>
        </div>
        {% endif %}
    </div>
    {% if searched %}
    <div class="list_searched">
        <ul>
            {% for topic, printable_topic in topics_searched.items %}
            <li class="list_topic_item color_{{topic.color}}">
                <a class="link-clickable" href="{% url 'questions:detail' topic.name %}">
                    <h3 class="inline-block-black">{{printable_topic}}</h3>
                    <p class="inline-block-black">Created: {{topic.created}}</p>
                    <p class="inline-block-black">Creator: {{topic.creator}}</p>
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% if empty %}
    <p> No hay ningún topic con esa búsqueda. </p>
    {% endif %}
    {% else %}
    <div class="list_topic">
        <ul>
            {% for topic, printable_topic in all_topics.items %}
            <li class="list_topic_item color_{{topic.color}}">
                <a class="link-clickable" href="{% url 'questions:detail' topic.name %}">
                    <h3 class="inline-block-black">{{printable_topic}}</h3>
                    <p class="inline-block-black">Created: {{topic.created}}</p>
                    <p class="inline-block-black">Creator: {{topic.creator}}</p>
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>

<div id="footer-container-grid" class="bg-light">
    <nav class="navbar sticky-bottom navbar-light bg-light">
        <div id="footer-about">
            <p id="about-header" class="footer-header architects">ABOUT</p>
            <div id="footer-social-info">
                <div id="footer-twitter-info">
                    <img id="footer-twitter-logo" alt="Twitter logo" src="{% static 'questions/twitter-logo-footer.svg'%}"/>
                    <div class="twitter-creators">
                        <img id="photo-enrique" class="inline-block-black" alt="Enrique Kessler Martínez" src="{% static 'questions/enrique_kessler_martinez.png'%}"/>
                        <a class="inline-block-black footer-link" href="https://twitter.com/quique_kessler">@quique_kessler</a>
                    </div>
                    <div class="twitter-creators">
                    </div>
                </div>
                <div id="footer-github-info">
                    <img id="footer-github-logo" alt="Github logo" src="{% static 'questions/github-logo-footer.svg'%}"/>
                    <div class="inline-block-black" id="link-github">
                        <a class="footer-link" href="https://github.com/Qkessler">Qkessler</a>
                    </div>
                </div>
            </div>
        </div>
        <div id="footer-developers">
        </div>
        <div id="footer-connect">
        </div>
        <div id="footer-help">
        </div>
    </nav>
</div>
{% endblock %}
